<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hand Detection Beta</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

  <style>
    /* General Reset */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: Arial, sans-serif;
}

body {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: #f4f4f9;
  min-height: 100vh;
}

/* Header */
header {
  margin: 20px 0;
  color: #333;
}

/* Menu */
#menu {
  text-align: center;
}

button {
  padding: 10px 20px;
  font-size: 16px;
  background-color: #4CAF50;
  color: white;
  border: none;
  cursor: pointer;
  border-radius: 5px;
  transition: background-color 0.3s ease;
}

button:hover {
  background-color: #45a049;
}

/* Video Container */
#video-container {
  position: relative;
  margin: 20px 0;
  width: 640px;
  height: 480px;
  border: 2px solid #ddd;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

video, canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

/* Results */
#results {
  margin-top: 20px;
  text-align: center;
  color: #333;
}

  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <h1>Hand Detection Beta Testing</h1>
  </header>

  <!-- Menu Section -->
  <div id="menu">
    <p>Click below to start hand detection:</p>
    <button id="startButton">Start Detection</button>
  </div>

  <!-- Video Feed -->
  <div id="video-container">
    <video id="video" autoplay playsinline></video>
    <canvas id="output"></canvas>
  </div>

  <!-- Results Display -->
  <div id="results">
    <h2>Detection Results:</h2>
    <p id="status">Waiting for detection...</p>
  </div>

  <!-- JavaScript -->
  <script>
    // Get UI Elements
const startButton = document.getElementById("startButton");
const videoElement = document.getElementById("video");
const canvasElement = document.getElementById("output");
const canvasCtx = canvasElement.getContext("2d");
const menu = document.getElementById("menu");
const status = document.getElementById("status");

let camera = null;

// Initialize MediaPipe Hands
const hands = new Hands({
  locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`,
});

hands.setOptions({
  maxNumHands: 2,
  modelComplexity: 1,
  minDetectionConfidence: 0.7,
  minTrackingConfidence: 0.7,
});

hands.onResults((results) => {
  // Clear canvas
  canvasCtx.save();
  canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);

  // Draw video to canvas
  canvasCtx.drawImage(results.image, 0, 0, canvasElement.width, canvasElement.height);

  // Draw hand landmarks
  if (results.multiHandLandmarks) {
    for (const landmarks of results.multiHandLandmarks) {
      drawConnectors(canvasCtx, landmarks, HAND_CONNECTIONS, { color: "#00FF00", lineWidth: 3 });
      drawLandmarks(canvasCtx, landmarks, { color: "#FF0000", radius: 5 });
    }
    status.innerText = "Hand Detected!";
  } else {
    status.innerText = "No Hands Detected";
  }
  canvasCtx.restore();
});

// Start Camera and Detection
startButton.addEventListener("click", () => {
  // Hide menu and show video
  menu.style.display = "none";
  videoElement.style.display = "block";
  canvasElement.style.display = "block";

  // Initialize Camera
  if (!camera) {
    camera = new Camera(videoElement, {
      onFrame: async () => {
        await hands.send({ image: videoElement });
      },
      width: 640,
      height: 480,
    });
    camera.start();
  }
});

  </script>
</body>
</html>
